<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ‰ Happy Birthday Toheeb ğŸ‰</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #0e0f1a;
      color: white;
      font-family: 'Inter', sans-serif;
      text-align: center;
      padding: 1rem;
    }
    .title {
      font-size: 2rem;
      font-weight: bold;
      color: #3b82f6;
      margin-top: 1rem;
      animation: fadeInDown 1s ease-in-out;
    }
    .countdown {
      font-size: 1.5rem;
      margin: 1rem 0;
    }
    .profile-img {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #3b82f6;
      margin-bottom: 1rem;
    }
    .card {
      background-color: #1a1c2e;
      border: none;
      margin: 1rem auto;
    }
    .btn-primary {
      background-color: #3b82f6;
      border: none;
    }
    .btn-primary:hover {
      background-color: #2563eb;
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">ğŸ‰ Happy Birthday Toheeb ğŸ‰</h1>
    <p class="countdown" id="countdown">Loading countdown...</p>
    
    <img src="https://via.placeholder.com/150" class="profile-img" alt="Toheeb Picture" />
    
    <h3 class="mt-4">Leave a Birthday Wish ğŸˆ</h3>
    <form id="wishForm" class="mb-4">
      <input type="text" id="name" class="form-control mb-2" placeholder="Your Name" required />
      <textarea id="message" class="form-control mb-2" placeholder="Your Message" rows="3" required></textarea>
      <button type="submit" class="btn btn-primary w-100">Send Wish</button>
    </form>

    <h4>ğŸ Wishes from Friends</h4>
    <div id="messages" class="mt-3"></div>

    <p class="mt-5 text-muted">Made with â¤ï¸ by To</p>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Countdown
    const countdownEl = document.getElementById('countdown');
    const birthday = new Date("2025-08-18T00:00:00");
    function updateCountdown() {
      const now = new Date();
      const diff = birthday - now;

      if (diff <= 0) {
        countdownEl.textContent = "ğŸ‚ Today is the day!";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const mins = Math.floor((diff / (1000 * 60)) % 60);
      const secs = Math.floor((diff / 1000) % 60);

      countdownEl.textContent = `${days}d ${hours}h ${mins}m ${secs}s`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Form submission
    const form = document.getElementById('wishForm');
    const messagesDiv = document.getElementById('messages');
    const apiURL = 'https://birthday-backend-v2.onrender.com/api/messages';

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const message = document.getElementById('message').value;

      const res = await fetch(apiURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, message })
      });

      if (res.ok) {
        form.reset();
        loadMessages();
      } else {
        alert("âŒ Failed to send wish.");
      }
    });

    async function loadMessages() {
      const res = await fetch(apiURL);
      const data = await res.json();
      messagesDiv.innerHTML = data.reverse().map(msg => `
        <div class="card p-3 text-start">
          <strong>${msg.name}</strong>
          <p>${msg.message}</p>
        </div>
      `).join('');
    }

    loadMessages();
  </script>
</body>
</html>
